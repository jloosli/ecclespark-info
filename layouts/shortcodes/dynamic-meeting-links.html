<script>
  const API_KEY = '{{ getenv "HUGO_API_KEY" }}';
  const API_BASE = "https://firestore.googleapis.com/v1/projects/";
  const API_PROJECT_ID = '{{ getenv "HUGO_API_PROJECT_ID" }}';
  const API_URL = `${API_BASE}${API_PROJECT_ID}/databases/(default)/documents/streams?key=${API_KEY}`;

/* @todo: get documents from firebase */

  function fetchMeetingsFromDatabase() {
    return fetch(API_URL)
      .then((response) => {
        console.log(response);
        if (!response.ok) {
          throw new Error("Network response was not ok");
        }
        return response.json();
      })
      .then((data) => {
        const meetings = data.documents.map((doc) => ({
          id: doc.name.split("/").pop(),
          ...doc.fields,
        }));
        return meetings;
      })
      .catch((error) => {
        console.error("Error fetching meetings:", error);
      });
  }
  fetchMeetingsFromDatabase().then(data=>console.log(data));
</script>
